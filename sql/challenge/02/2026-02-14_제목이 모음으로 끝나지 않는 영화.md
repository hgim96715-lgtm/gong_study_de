---
tags:
  - SQL_TEST
related:
  - "[[SQL_Filtering_WHERE]]"
source: solvesql
difficulty:
  - Lv.2
status: 🟨 힌트참고
---
##  해결 전략 (Code Before Think)

> 17세 미만 학생이 DVD 대여점에 혼자와서는 대여할 수 없는 영화 중 제목이 모음(’A’, ‘E’, ‘I’, ‘O’, ‘U’)로 끝나지 않는 영화를 찾고 싶습니다. 
> 조건에 맞는 영화 제목(`title`)을 출력하는 쿼리를 작성해주세요. 
> 다른 컬럼은 출력되지 말아야 합니다.
> `rating` 컬럼에는 미국영화협회(Motion Picture Association, MPA)에서 운영하는 영화 등급 제도 데이터가 들어있습니다. 이는 영화의 내용을 연령대별로 분류하여 관람 적합성을 판단하는 시스템인데 각 등급은 아래 의미를 가집니다.
> - R (Restricted): 17세 미만은 부모 또는 21세 이상과 동반 관람만 가능
>  - NC-17 (No One 17 and Under Admitted): 18세 미만 관람 불가
>  - G (General Audience): 모든 연령 관람 가능
>  - PG (Parental Guidance Suggested): 아동 관람 시 부모 지도 필요
>  - PG-13 (Parents Strongly Cautioned): 13세 미만 관람 시 부모의 주의 필요

1. **타겟 데이터:** (어떤 테이블에서 무엇을 뽑아야 하는가?)
	- `film` 데이터
	- `title` : 영화제목
	- `rating` : 등급분류
2. **조건 분석:**
   - 영화 제목이 모음 (’A’, ‘E’, ‘I’, ‘O’, ‘U’)로 끝나지 않는 영화
   - 17세 미만 이니깐, R 또는 NC-17안에 해당
1. **사용할 문법:**
   - WHERE 
   - IN
   - ILIKE
---
## 정답 쿼리 (Solution)

```sql
-- 여기에 작성한 쿼리를 붙여넣으세요.
SELECT title
FROM film
WHERE NOT(title ILIKE ANY (ARRAY['%A','%E','%I','%O','%U'])) AND rating IN ('R','NC-17')
```

---
##  오답 노트 & 배운 점 (Retrospective)

-  **내가 실수한 부분:**
	- 처음에 `ILIKE IN` 도 되지 않을까? 해서 조합을 시도했지만 에러가났다.
	- 찾아보니 많은 사람들이 시도하려고 했지만 하지 못한걸 발견했다.
	- `IN`은 **정확한 값** 매칭용 , `ILIKE`는 **패턴** 매칭용 이라서 조합이 불가 

-  **새로 알게 된 함수/꿀팁:**
	- `ILIKE ANY (ARRAY[...])` 패턴 비교 다중조건 , 단 ILIKE는 PostgreSQL에만 있는 거기 때문에 이 문법은 PostgreSQL 전용이다.

---
## 더 나은 풀이가 있다면?

```sql
-- 더 나은 풀이가 있을경우 
```
