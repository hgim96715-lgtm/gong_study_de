---
tags:
  - SQL_TEST
related:
  - "[[00_SQL_Challenge_DashBoard]]"
  - "[[SQL_String_Functions]]"
source: solvesql
difficulty:
  - Lv.3
status: 🟩 해결
---
##  해결 전략 (Code Before Think)

>이 중 `address` 컬럼에는 주소 정보가 들어가있는데, 정제가 되어있지 않아 활용이 어렵습니다. 이 데이터를 각각 시, 도 정보를 담고 있는 `sido` 컬럼과 시, 군, 구 정보를 담고 있는 `sigungu`로 정제하여 각 행정구역 별로 몇 개의 카페가 있는지 집계하는 쿼리를 작성해주세요. 쿼리 결과는 카페가 가장 많은 행정구역 순으로 출력을 해야 합니다.
>예를 들어, ‘경기도 성남시 분당구 구미로 11’이라는 데이터는 `sido` 값이 ‘경기도’, `sigungu` 값이 ‘성남시’로 정제되어야 합니다. ‘대전광역시 대덕구 계족로 545’라는 데이터는 `sido` 값이 ‘대전광역시’, `sigungu` 값이 ‘대덕구’로 정제되어야 합니다.

1. **타겟 데이터:** (어떤 테이블에서 무엇을 뽑아야 하는가?)
   - `cafes` 테이블
	   - ` address` 주소 
	   - `cafe_id` 카페 ID
1. **조건 분석:**
   - 카페 개수를 집계 `COUNT()`
   - 지역 단위 집계를  `GROUP BY`
   - `address` 컬럼에서 공백 `" "`을 기준으로 문자열을 분리
1. **사용할 문법:**
   - `SPLIT_PART(address, ' ', n)` 공백 기준 n번째 문자열 추출 
---
## 정답 쿼리 (Solution)

```sql
-- 여기에 작성한 쿼리를 붙여넣으세요.
SELECT SPLIT_PART(address,' ', 1) as sido,
SPLIT_PART(address,' ',2)as sigungu,
COUNT(cafe_id) as cnt
FROM cafes
GROUP BY sido, sigungu
ORDER BY cnt DESC
```

---
##  오답 노트 & 배운 점 (Retrospective)

-  **내가 실수한 부분:**
    
-  **새로 알게 된 함수/꿀팁:**

---
## 더 나은 풀이가 있다면?

```sql
-- 더 나은 풀이가 있을경우 
```
