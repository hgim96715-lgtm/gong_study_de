---
aliases: []
tags:
  - SQL_TEST
related:
  - "[[SQL_Date_Functions]]"
source: solvesql
difficulty:
  - Lv.1
status:
  - π© ν•΄κ²°
---
##  ν•΄κ²° μ „λµ (Code Before Think)

> λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ΅°νν•΄ μ—°λ„λ³„ μλ§¤μ¶μ„ μ΅°νν•λ” μΏΌλ¦¬λ¥Ό μ‘μ„±ν•΄μ£Όμ„Έμ”.
> μλ§¤μ¶μ€ λ°ν’λμ§€ μ•μ€ κ±°λ λ‚΄μ—­μ— λ€ν•΄ μ£Όλ¬Έ κΈμ•΅μ—μ„ ν• μΈ κΈμ•΅μ„ μ μ™Έν• μ‹¤μ  κ²°μ  κΈμ•΅μ ν•©μ„ μλ―Έν•©λ‹λ‹¤
> μ—°λ„ κΈ°μ¤€ μ¤λ¦„μ°¨μ μ •λ ¬λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

1. **νƒ€κ² λ°μ΄ν„°:** (μ–΄λ–¤ ν…μ΄λΈ”μ—μ„ λ¬΄μ—‡μ„ λ½‘μ•„μ•Ό ν•λ”κ°€?)
   - transactions ν…μ΄λΈ”μ—μ„ total_price μ£Όλ¬ΈκΈμ•΅ , discount_amount ν• μΈκΈμ•΅ 
   - is_returned μƒν’λ°ν’μ—¬λ¶€ 
1. **μ΅°κ±΄ λ¶„μ„:**
   - μ—°λ„λ³„ 
   - ν•©κ³„
   - is_returned=False
1. **μ‚¬μ©ν•  λ¬Έλ²•:**
   - GROUP BY 
   - SUM
   - WHERE
---
## μ •λ‹µ μΏΌλ¦¬ (Solution)

```sql
-- μ—¬κΈ°μ— μ‘μ„±ν• μΏΌλ¦¬λ¥Ό λ¶™μ—¬λ„£μΌμ„Έμ”.
SELECT 
	SUM(total_price-discount_amount) AS net_sales,
	EXTRACT(YEAR FROM purchased_at) AS year
FROM transactions
WHERE is_returned=FALSE
GROUP BY EXTRACT(YEAR FROM purchased_at)
ORDER BY year
```

---
##  μ¤λ‹µ λ…ΈνΈ & λ°°μ΄ μ  (Retrospective)

-  **λ‚΄κ°€ μ‹¤μν• λ¶€λ¶„:**
	- λ‚ μ§ μ»¬λΌμ—μ„ μ—°λ„/μ›”μ„ μ¶”μ¶ν•λ” ν•¨μκ°€ λ°”λ΅ λ– μ¤λ¥΄μ§€ μ•μ•λ‹¤ -> λ” μμ„Έν λ΄λ‘ ν•„μ”μμ!
    
-  **λ³µμµ ν•¨μ!**
	- Extract : λ‚ μ§ μ¶”μ¶ !

---
## λ” λ‚μ€ ν’€μ΄κ°€ μλ‹¤λ©΄?

```sql
-- λ” λ‚μ€ ν’€μ΄κ°€ μμ„κ²½μ° 
```
