---
aliases: []
tags:
  - SQL_TEST
related:
  - "[[Aggregation_GROUP_BY]]"
  - "[[Numeric_Functions]]"
source: solvesql
difficulty:
  - Lv.1
status: 🟩 해결
---
##  해결 전략 (Code Before Think)

> 요일별로 팁 총액을 집계하고 팁이 가장 많았던 요일과 그날의 팁 총액을 출력하는 쿼리를 작성해주세요
> 그날의 팁 총액은 소수점 셋째 자리에서 반올림하여 출력되도록 해주세요.
> 결과 데이터는 아래 컬럼을 포함해야 합니다.- `day` - 요일, - `tip_daily` - 요일 별 팁 총액

1. **타겟 데이터:** (어떤 테이블에서 무엇을 뽑아야 하는가?)
   - tips 테이블
1. **조건 분석:**
   -  요일별 ->
   - 가장 많았던 요일
   - 가장 많았던 요일의 팁 총액
   - 소수점 셋째 자리
1. **사용할 문법:**
   - GROUP BY

---
## 정답 쿼리 (Solution)

```sql
-- 여기에 작성한 쿼리를 붙여넣으세요.
SELECT day,SUM(tip) as tip_daily
FROM tips
GROUP BY day
ORDER BY SUM(tip) DESC
LIMIT 1
```

---
##  오답 노트 & 배운 점 (Retrospective)

-  **헷갈린 부분:**
	- “1등을 뽑아야 한다 = RANK() 써야 하나?” 라고 자동으로 떠올림
	- >이 문제는 **집계 결과 중 최댓값 1개만 필요**한 상황 RANK가 필요없음
	- 서브쿼리를 먼저 떠올려서 문제를 복잡하게 생각함
-  **새로 알게 된 함수/꿀팁:**
	- **이런 경우엔 RANK() 필요 없음**
		- ❌ “가장 큰 값 하나”
		- ❌ “상위 1개만 필요”
		- ⭕ RANK는 **순위 전체가 필요하거나, 동률을 유지해야 할 때** 사용

> “순위표가 필요하면 RANK,  
> 최고값 하나면 ORDER BY + LIMIT”

---
## 더 나은 풀이가 있다면?

```sql
-- 더 나은 풀이가 있을경우 
SELECT
    day,
    ROUND(SUM(tip), 2) AS tip_daily
FROM tips
GROUP BY day
ORDER BY tip_daily DESC
LIMIT 1;
```
